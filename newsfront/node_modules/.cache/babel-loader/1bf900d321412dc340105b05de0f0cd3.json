{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\loren\\\\OneDrive\\\\\\u684C\\u9762\\\\hw8\\\\newsfront\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\loren\\\\OneDrive\\\\\\u684C\\u9762\\\\hw8\\\\newsfront\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _createSuper from\"C:\\\\Users\\\\loren\\\\OneDrive\\\\\\u684C\\u9762\\\\hw8\\\\newsfront\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import _inherits from\"C:\\\\Users\\\\loren\\\\OneDrive\\\\\\u684C\\u9762\\\\hw8\\\\newsfront\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import{Consumer}from\"../../context\";import axios from\"axios\";import queryString from\"query-string\";import Moment from\"react-moment\";import{FacebookIcon,EmailShareButton,FacebookShareButton,TwitterShareButton,TwitterIcon,EmailIcon}from\"react-share\";// import Bookmark from \"../Navbars/Bookmark\";\nimport ReadMore from\"@jamespotz/react-simple-readmore\";import truncate from\"lodash/truncate\";import Comment from\"./Comment\";// import { Spinner, Container } from \"react-bootstrap\";\nimport IsBookMarkDetail from\"./IsBookMarkDetail\";import NotBookMarkDetail from\"./NotBookMarkDetai\";import ReactTooltip from\"react-tooltip\";import{ToastContainer,toast,Zoom}from\"react-toastify\";import\"react-toastify/dist/ReactToastify.css\";import Spinner from\"../News/Spinner\";var Details=/*#__PURE__*/function(_Component){_inherits(Details,_Component);var _super=_createSuper(Details);function Details(props){var _this;_classCallCheck(this,Details);_this=_super.call(this,props);_this.AddToBookMark=function(){if(localStorage.getItem(JSON.stringify(_this.state.detailId))===null){localStorage.setItem(JSON.stringify(_this.state.detailId),JSON.stringify(_this.state.detailNews));_this.setState({isBookMarked:true});toast(\"Saving \".concat(_this.state.detailNews.detailTitle),{position:\"top-center\",autoClose:2000,hideProgressBar:true,closeOnClick:true,pauseOnHover:true,draggable:true});}else{localStorage.removeItem(JSON.stringify(_this.state.detailId));_this.setState({isBookMarked:false});toast(\"Removing - \".concat(_this.state.detailNews.detailTitle),{position:\"top-center\",autoClose:2000,hideProgressBar:true,closeOnClick:true,pauseOnHover:true,draggable:true});}// localStorage.getItem(JSON.stringify(this.state.detailId)) === null\n//   ? this.setState({\n//       isBookMarked: false,\n//     })\n//   : this.setState({\n//       isBookMarked: true,\n//     });\n};_this.state={isBookMarked:false,detailNews:{},detailDescription:\"\",detailId:\"\",hidden:false};return _this;}_createClass(Details,[{key:\"componentDidMount\",// toastAdd = () =>\n//   toast(\"ðŸ¦„ Wow so easy!\", {\n//     position: \"top-center\",\n//     autoClose: 5000,\n//     hideProgressBar: true,\n//     closeOnClick: true,\n//     pauseOnHover: true,\n//     draggable: true,\n//   });\n// çˆ¶ç»„ä»¶æ˜¯ä¸€ä¸ªé¡µé¢ï¼Œå­ç»„ä»¶æ˜¯è¿™ä¸ªé¡µé¢é‡Œé¢çš„è¯„è®ºåŒºã€‚åœ¨çˆ¶ç»„ä»¶é‡Œé¢å…ˆèŽ·å–è¿™ä¸ªé¡µé¢çš„urlçš„å‚æ•°ï¼Œç„¶åŽç”¨æŠŠè¿™ä¸ªå‚æ•°ä¼ ç»™å­ç»„ä»¶ã€‚\nvalue:function componentDidMount(){var _this2=this;// const value = queryString.parse(this.props.location.search);\n// const id = value.id;\nvar param=window.location.search.slice(4,9);if(param===\"https\"){localStorage.setItem(\"guardianChecked\",false);}else{localStorage.setItem(\"guardianChecked\",true);}console.log(param);if(localStorage.getItem(\"guardianChecked\")===\"true\"){var value=queryString.parse(this.props.location.search);var id=value.id;axios.get(\"http://nodejsapp-csci571xiaomingniu.us-east-1.elasticbeanstalk.com/article?id=\".concat(id),{// http://localhost:5000/\n// http://nodejsapp-csci571xiaomingniu.us-east-1.elasticbeanstalk.com/\n// 18.205.29.119\n// ec2-18-205-29-119.compute-1.amazonaws.com\nheaders:{guardianChecked:1}}).then(function(res){_this2.setState({detailNews:res.data,detailDescription:res.data.detailDescription,detailId:res.data.detailId,hidden:true});}).catch(function(err){return console.log(err);});}else{var _value=queryString.parse(this.props.location.search);var _id=_value.id;axios.get(\"/article?id=\".concat(_id),{headers:{guardianChecked:2}}).then(function(res){_this2.setState({detailNews:res.data,detailDescription:res.data.detailDescription,detailId:res.data.detailId,hidden:true});}).catch(function(err){return console.log(err);});}}},{key:\"render\",value:function render(){var detailId=this.state.detailId;if(detailId.length!=0){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"card m-3\"},/*#__PURE__*/React.createElement(\"h4\",{className:\"card-title mt-2 ml-2 font-italic\"},this.state.detailNews.detailTitle),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex bd-highlight mb-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"p-2 bd-highlight\"},/*#__PURE__*/React.createElement(Moment,{className:\"font-italic\",format:\"MM/DD/YYYY\"},this.state.detailNews.detailDate),/*#__PURE__*/React.createElement(\"br\",null)),/*#__PURE__*/React.createElement(\"div\",{className:\"ml-auto p-2 bd-highlight\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container px-lg-5 border-0\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row mx-lg-n5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col py-3 px-lg-3 border border-0\"},/*#__PURE__*/React.createElement(\"a\",{\"data-tip\":\"Facebook\"},/*#__PURE__*/React.createElement(ReactTooltip,{effect:\"solid\",style:extraClass}),/*#__PURE__*/React.createElement(FacebookShareButton,{url:this.state.detailNews.detailUrl,hashtag:\"#CSCI_571_NewsApp\",className:\"button\"},/*#__PURE__*/React.createElement(FacebookIcon,{size:32,round:true})))),/*#__PURE__*/React.createElement(\"div\",{className:\"col py-3 px-lg-3 border  border-0\"// data-toggle=\"tooltip\"\n// data-placement=\"top\"\n// title=\"Twitter\"\n},/*#__PURE__*/React.createElement(\"a\",{\"data-tip\":\"Twitter\"},/*#__PURE__*/React.createElement(ReactTooltip,{effect:\"solid\",style:extraClass}),/*#__PURE__*/React.createElement(TwitterShareButton,{url:this.state.detailNews.detailUrl,hashtags:[\"CSCI_571_NewsApp\"],className:\"button\"},/*#__PURE__*/React.createElement(TwitterIcon,{size:32,round:true})),\" \")),/*#__PURE__*/React.createElement(\"div\",{className:\"col py-3 px-lg-3 border  border-0\"},/*#__PURE__*/React.createElement(\"a\",{\"data-tip\":\"Email\"},/*#__PURE__*/React.createElement(ReactTooltip,{effect:\"solid\",style:extraClass}),/*#__PURE__*/React.createElement(EmailShareButton,{url:this.state.detailNews.detailUrl,subject:\"#CSCI_571_NewsApp\",body:\"\",separator:\"\",\"data-toggle\":\"tooltip\",\"data-placement\":\"top\",title:\"Email\"},/*#__PURE__*/React.createElement(EmailIcon,{size:32,round:true})))),/*#__PURE__*/React.createElement(\"div\",{className:\"col py-3 px-lg-5 border  border-0\"},/*#__PURE__*/React.createElement(\"a\",{\"data-tip\":\"Bookmark\"},/*#__PURE__*/React.createElement(ReactTooltip,{effect:\"solid\",style:extraClass}),/*#__PURE__*/React.createElement(\"button\",{style:bookMarkButtonStyle,onClick:this.AddToBookMark},localStorage.getItem(JSON.stringify(this.state.detailId))===null?/*#__PURE__*/React.createElement(NotBookMarkDetail,null):/*#__PURE__*/React.createElement(IsBookMarkDetail,null)),/*#__PURE__*/React.createElement(ToastContainer,{transition:Zoom,position:\"top-center\",autoClose:500,hideProgressBar:true,newestOnTop:false,closeOnClick:true,rtl:false,pauseOnVisibilityChange:true,draggable:true,pauseOnHover:true}))))))),/*#__PURE__*/React.createElement(\"div\",{className:\" ml-3 mr-3\"},/*#__PURE__*/React.createElement(\"img\",{src:this.state.detailNews.detailImg,className:\"card-img-top rounded \",alt:\"...\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"card-body\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(ReadMore,{btnStyles:{border:\"none\",background:\"#ffffff\",float:\"right\",fontSize:\"x-large\"},minHeight:50,defaultShownOnLess:/*#__PURE__*/React.createElement(\"p\",{dangerouslySetInnerHTML:{__html:truncate(\"\".concat(this.state.detailDescription),{length:900})}})},/*#__PURE__*/React.createElement(\"p\",{dangerouslySetInnerHTML:{__html:\"\".concat(this.state.detailDescription)}}))))),/*#__PURE__*/React.createElement(Comment,{commentId:this.state.detailId}));}else{return/*#__PURE__*/React.createElement(Spinner,null);}}}]);return Details;}(Component);export{Details as default};var bookMarkButtonStyle={background:\"none\",border:\"none\"};var extraClass={font:\"20px !important\"};","map":{"version":3,"sources":["C:/Users/loren/OneDrive/æ¡Œé¢/hw8/newsfront/src/components/details/Details.jsx"],"names":["React","Component","Consumer","axios","queryString","Moment","FacebookIcon","EmailShareButton","FacebookShareButton","TwitterShareButton","TwitterIcon","EmailIcon","ReadMore","truncate","Comment","IsBookMarkDetail","NotBookMarkDetail","ReactTooltip","ToastContainer","toast","Zoom","Spinner","Details","props","AddToBookMark","localStorage","getItem","JSON","stringify","state","detailId","setItem","detailNews","setState","isBookMarked","detailTitle","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","removeItem","detailDescription","hidden","param","window","location","search","slice","console","log","value","parse","id","get","headers","guardianChecked","then","res","data","catch","err","length","detailDate","extraClass","detailUrl","bookMarkButtonStyle","detailImg","border","background","float","fontSize","__html","font"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Consumer } from \"../../context\";\r\nimport axios from \"axios\";\r\nimport queryString from \"query-string\";\r\nimport Moment from \"react-moment\";\r\nimport {\r\n  FacebookIcon,\r\n  EmailShareButton,\r\n  FacebookShareButton,\r\n  TwitterShareButton,\r\n  TwitterIcon,\r\n  EmailIcon,\r\n} from \"react-share\";\r\n// import Bookmark from \"../Navbars/Bookmark\";\r\nimport ReadMore from \"@jamespotz/react-simple-readmore\";\r\nimport truncate from \"lodash/truncate\";\r\nimport Comment from \"./Comment\";\r\n// import { Spinner, Container } from \"react-bootstrap\";\r\nimport IsBookMarkDetail from \"./IsBookMarkDetail\";\r\nimport NotBookMarkDetail from \"./NotBookMarkDetai\";\r\nimport ReactTooltip from \"react-tooltip\";\r\nimport { ToastContainer, toast, Zoom } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport Spinner from \"../News/Spinner\";\r\n\r\nexport default class Details extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isBookMarked: false,\r\n      detailNews: {},\r\n      detailDescription: \"\",\r\n      detailId: \"\",\r\n      hidden: false,\r\n    };\r\n  }\r\n\r\n  AddToBookMark = () => {\r\n    if (localStorage.getItem(JSON.stringify(this.state.detailId)) === null) {\r\n      localStorage.setItem(\r\n        JSON.stringify(this.state.detailId),\r\n        JSON.stringify(this.state.detailNews)\r\n      );\r\n      this.setState({\r\n        isBookMarked: true,\r\n      });\r\n      toast(`Saving ${this.state.detailNews.detailTitle}`, {\r\n        position: \"top-center\",\r\n        autoClose: 2000,\r\n        hideProgressBar: true,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        draggable: true,\r\n      });\r\n    } else {\r\n      localStorage.removeItem(JSON.stringify(this.state.detailId));\r\n      this.setState({\r\n        isBookMarked: false,\r\n      });\r\n      toast(`Removing - ${this.state.detailNews.detailTitle}`, {\r\n        position: \"top-center\",\r\n        autoClose: 2000,\r\n        hideProgressBar: true,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        draggable: true,\r\n      });\r\n    }\r\n\r\n    // localStorage.getItem(JSON.stringify(this.state.detailId)) === null\r\n    //   ? this.setState({\r\n    //       isBookMarked: false,\r\n    //     })\r\n    //   : this.setState({\r\n    //       isBookMarked: true,\r\n    //     });\r\n  };\r\n  // toastAdd = () =>\r\n  //   toast(\"ðŸ¦„ Wow so easy!\", {\r\n  //     position: \"top-center\",\r\n  //     autoClose: 5000,\r\n  //     hideProgressBar: true,\r\n  //     closeOnClick: true,\r\n  //     pauseOnHover: true,\r\n  //     draggable: true,\r\n  //   });\r\n  // çˆ¶ç»„ä»¶æ˜¯ä¸€ä¸ªé¡µé¢ï¼Œå­ç»„ä»¶æ˜¯è¿™ä¸ªé¡µé¢é‡Œé¢çš„è¯„è®ºåŒºã€‚åœ¨çˆ¶ç»„ä»¶é‡Œé¢å…ˆèŽ·å–è¿™ä¸ªé¡µé¢çš„urlçš„å‚æ•°ï¼Œç„¶åŽç”¨æŠŠè¿™ä¸ªå‚æ•°ä¼ ç»™å­ç»„ä»¶ã€‚\r\n  componentDidMount() {\r\n    // const value = queryString.parse(this.props.location.search);\r\n    // const id = value.id;\r\n    const param = window.location.search.slice(4, 9);\r\n    if (param === \"https\") {\r\n      localStorage.setItem(\"guardianChecked\", false);\r\n    } else {\r\n      localStorage.setItem(\"guardianChecked\", true);\r\n    }\r\n    console.log(param);\r\n    if (localStorage.getItem(\"guardianChecked\") === \"true\") {\r\n      const value = queryString.parse(this.props.location.search);\r\n      const id = value.id;\r\n      axios\r\n        .get(\r\n          `http://nodejsapp-csci571xiaomingniu.us-east-1.elasticbeanstalk.com/article?id=${id}`,\r\n          {\r\n            // http://localhost:5000/\r\n            // http://nodejsapp-csci571xiaomingniu.us-east-1.elasticbeanstalk.com/\r\n            // 18.205.29.119\r\n            // ec2-18-205-29-119.compute-1.amazonaws.com\r\n            headers: {\r\n              guardianChecked: 1,\r\n            },\r\n          }\r\n        )\r\n        .then((res) => {\r\n          this.setState({\r\n            detailNews: res.data,\r\n            detailDescription: res.data.detailDescription,\r\n            detailId: res.data.detailId,\r\n            hidden: true,\r\n          });\r\n        })\r\n        .catch((err) => console.log(err));\r\n    } else {\r\n      const value = queryString.parse(this.props.location.search);\r\n      const id = value.id;\r\n      axios\r\n        .get(`/article?id=${id}`, {\r\n          headers: {\r\n            guardianChecked: 2,\r\n          },\r\n        })\r\n        .then((res) => {\r\n          this.setState({\r\n            detailNews: res.data,\r\n            detailDescription: res.data.detailDescription,\r\n            detailId: res.data.detailId,\r\n            hidden: true,\r\n          });\r\n        })\r\n        .catch((err) => console.log(err));\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { detailId } = this.state;\r\n    if (detailId.length != 0) {\r\n      return (\r\n        <div>\r\n          <div className=\"card m-3\">\r\n            <h4 className=\"card-title mt-2 ml-2 font-italic\">\r\n              {this.state.detailNews.detailTitle}\r\n            </h4>\r\n            <div className=\"d-flex bd-highlight mb-3\">\r\n              <div className=\"p-2 bd-highlight\">\r\n                <Moment className=\"font-italic\" format=\"MM/DD/YYYY\">\r\n                  {this.state.detailNews.detailDate}\r\n                </Moment>\r\n                <br />\r\n              </div>\r\n              <div className=\"ml-auto p-2 bd-highlight\">\r\n                {/* -------------------------------------share----------------------------------------- */}\r\n                <div className=\"container px-lg-5 border-0\">\r\n                  <div className=\"row mx-lg-n5\">\r\n                    <div className=\"col py-3 px-lg-3 border border-0\">\r\n                      <a data-tip=\"Facebook\">\r\n                        <ReactTooltip effect=\"solid\" style={extraClass} />\r\n                        <FacebookShareButton\r\n                          url={this.state.detailNews.detailUrl}\r\n                          hashtag=\"#CSCI_571_NewsApp\"\r\n                          className=\"button\"\r\n                        >\r\n                          <FacebookIcon size={32} round={true} />\r\n                        </FacebookShareButton>\r\n                      </a>\r\n                    </div>\r\n                    <div\r\n                      className=\"col py-3 px-lg-3 border  border-0\"\r\n                      // data-toggle=\"tooltip\"\r\n                      // data-placement=\"top\"\r\n                      // title=\"Twitter\"\r\n                    >\r\n                      <a data-tip=\"Twitter\">\r\n                        <ReactTooltip effect=\"solid\" style={extraClass} />\r\n                        <TwitterShareButton\r\n                          url={this.state.detailNews.detailUrl}\r\n                          hashtags={[\"CSCI_571_NewsApp\"]}\r\n                          className=\"button\"\r\n                        >\r\n                          <TwitterIcon size={32} round={true} />\r\n                        </TwitterShareButton>{\" \"}\r\n                      </a>\r\n                    </div>\r\n                    <div className=\"col py-3 px-lg-3 border  border-0\">\r\n                      <a data-tip=\"Email\">\r\n                        <ReactTooltip effect=\"solid\" style={extraClass} />\r\n                        <EmailShareButton\r\n                          url={this.state.detailNews.detailUrl}\r\n                          subject=\"#CSCI_571_NewsApp\"\r\n                          body=\"\"\r\n                          separator=\"\"\r\n                          data-toggle=\"tooltip\"\r\n                          data-placement=\"top\"\r\n                          title=\"Email\"\r\n                        >\r\n                          <EmailIcon size={32} round={true} />\r\n                        </EmailShareButton>\r\n                      </a>\r\n                    </div>\r\n                    <div className=\"col py-3 px-lg-5 border  border-0\">\r\n                      <a data-tip=\"Bookmark\">\r\n                        <ReactTooltip effect=\"solid\" style={extraClass} />\r\n                        <button\r\n                          style={bookMarkButtonStyle}\r\n                          onClick={this.AddToBookMark}\r\n                        >\r\n                          {localStorage.getItem(\r\n                            JSON.stringify(this.state.detailId)\r\n                          ) === null ? (\r\n                            <NotBookMarkDetail />\r\n                          ) : (\r\n                            <IsBookMarkDetail />\r\n                          )}\r\n                        </button>\r\n                        <ToastContainer\r\n                          transition={Zoom}\r\n                          position=\"top-center\"\r\n                          autoClose={500}\r\n                          hideProgressBar\r\n                          newestOnTop={false}\r\n                          closeOnClick\r\n                          rtl={false}\r\n                          pauseOnVisibilityChange\r\n                          draggable\r\n                          pauseOnHover\r\n                        />\r\n                      </a>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\" ml-3 mr-3\">\r\n              <img\r\n                src={this.state.detailNews.detailImg}\r\n                className=\"card-img-top rounded \"\r\n                alt=\"...\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"card-body\">\r\n              {/* https://www.npmjs.com/package/@jamespotz/react-simple-readmore */}\r\n              <div>\r\n                <ReadMore\r\n                  btnStyles={{\r\n                    border: \"none\",\r\n                    background: \"#ffffff\",\r\n                    float: \"right\",\r\n                    fontSize: \"x-large\",\r\n                  }}\r\n                  minHeight={50}\r\n                  defaultShownOnLess={\r\n                    <p\r\n                      dangerouslySetInnerHTML={{\r\n                        __html: truncate(`${this.state.detailDescription}`, {\r\n                          length: 900,\r\n                        }),\r\n                      }}\r\n                    />\r\n                  }\r\n                >\r\n                  <p\r\n                    dangerouslySetInnerHTML={{\r\n                      __html: `${this.state.detailDescription}`,\r\n                    }}\r\n                  />\r\n                </ReadMore>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <Comment commentId={this.state.detailId} />\r\n        </div>\r\n      );\r\n    } else {\r\n      return <Spinner />;\r\n    }\r\n  }\r\n}\r\n\r\nconst bookMarkButtonStyle = {\r\n  background: \"none\",\r\n  border: \"none\",\r\n};\r\n\r\nconst extraClass = {\r\n  font: \"20px !important\",\r\n};\r\n"]},"metadata":{},"sourceType":"module"}